# Save my .secrets, .netrc and gpg private key files to 1password
if [ -z "$OP_SESSION" ]; then
  eval $(op signin my)
fi

case $1 in
-a)
  echo "Saving all secrets"
  op edit document jsmwdtpgtbac5d6r7p4u2xcykm ~/.secrets
  op edit document vsksk2c4svgenbulii7muhkfte ~/.gnupg/colin@symr.io.asc
  op edit document qiv5n74bsfg7xa4i7qzc2gdx74 ~/.netrc
  ;;
-s)
  echo "Saving secrets"
  op edit document jsmwdtpgtbac5d6r7p4u2xcykm ~/.secrets
  ;;
-g)
  # Expires 2027-03-23 - regen using `gpg --armor --export-secret-keys >! colin@symr.io.asc` after refreshing
  echo "Saving gpg private key"
  op edit document vsksk2c4svgenbulii7muhkfte ~/.gnupg/colin@symr.io.asc
  ;;
-n)
  echo "Saving netrc"
  op edit document qiv5n74bsfg7xa4i7qzc2gdx74 ~/.netrc
  ;;
*)
  echo "Usage: $0 [-s|-g|-n]"
  ;;
esac